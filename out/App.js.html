<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: App.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: App.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import "./App.css";
import React, { useState, useEffect } from "react";
import Input from "./component/input.js";
import Output from "./component/output.js";
import History from "./component/history.js";
import HistoryManager from "./manager/data.js";

/**
 * This is the main page of the website.
 * It holds within it three components :
 * Input
 * Output
 * History
 * @state {array} translations - array of history of translations.
 * @state {string} currentTrans - current translated phrase.
 */

function App() {
  const driver = HistoryManager();
  console.log("driver", driver.getHistory);
  const [translations, setTranslations] = useState([]);
  const [currentTrans, setCurrentTrans] = useState("");
  useEffect(() => {
    function trans() {
      getAllTranslations();
    }
    trans();
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, []);

  async function getAllTranslations() {
    console.log(driver);
    var x = await driver.getHistory();
    setTranslations(x);
  }

  async function getTranslationsAndSave(phrase, language) {
    const lang = language.toLowerCase();
    const new_phrase = encodeURI(phrase);
    var url = `https://api.funtranslations.com/translate/${lang}.json?text=${new_phrase}`;
    console.log(url);
    console.log("URL-----", url);
    console.log("APP PHRASE", phrase);
    try {
      await fetch(url, {
        method: "GET",
      })
        .then((response) => response.json())
        .then(async (data) => {
          console.log(data.contents.translated);
          setCurrentTrans(data.contents.translated);
          await driver.addTranslation(
            phrase,
            data.contents.translated,
            language
          );
          await getAllTranslations();

          // console.log("API DID NOT RETURN ANYTHING!!!")
        });
    } catch (error) {
      console.log("API NOT REACHED!!", error.message);
    }
  }

  return (
    &lt;div className="App justify-content-center">
      &lt;h1 className="my-4">Have fun with fun translations!!&lt;/h1>
      &lt;div className="m-4">
        &lt;Input getTranslationsAndSave={getTranslationsAndSave}>&lt;/Input>
      &lt;/div>
      &lt;div className="m-4">
        &lt;Output currentTrans={currentTrans}>&lt;/Output>
      &lt;/div>
      &lt;h1 className="my-4">History&lt;/h1>
      &lt;div className="m-4">
        &lt;History translations={translations}>&lt;/History>
      &lt;/div>
    &lt;/div>
  );
}

export default App;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sat Apr 16 2022 03:08:27 GMT-0700 (Pacific Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
